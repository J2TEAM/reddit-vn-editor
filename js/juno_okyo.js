/* Developed by Juno_okyo */
(function(){new Vue({el:"#juno_okyo",data:{url:null,result:"",comment_separator:"--------------------------",title_upper:!0,show_scrore:!0,loading:!1,copied:!0},methods:{onSubmit:function(){var a=this;null!==url&&(this.result="",this.loading=!0,fetch(this.url+".json").then(function(a){return a.json()}).then(function(d){var b=d[1].data.children;d=d[0].data.children[0].data.title;a.title_upper&&(d=d.toUpperCase());a.result=a.getSubReddit()+"\n\n"+d+"\n\n";b.map(function(c){c=c.data;c.author&&c.body&&
"[removed]"!==c.body&&(a.result+=">u/"+c.author,a.show_scrore&&(a.result+=" ["+a.kFormatter(c.score)+" points]"),a.result+=": "+c.body+"\n\n",void 0!==c.replies&&c.replies.data&&a.getReplies(c.replies,">>"),a.result+=a.comment_separator+"\n\n")});a.result+="Link reddit: "+a.url;a.loading=!1}))},getReplies:function(a,d){var b=this;void 0!==a&&void 0!==a.data&&a.data.children.map(function(a){a=a.data;a.author&&a.body&&"[removed]"!==a.body&&(b.result+=d+"u/"+a.author,b.show_scrore&&(b.result+=" ["+b.kFormatter(a.score)+
" points]"),b.result+=": "+a.body+"\n\n",b.getReplies(a.replies,d+">"))})},getSubReddit:function(){try{var a=(new URL(this.url)).pathname.split("/");return"/"+a[1]+"/"+a[2]}catch(d){return!1}},kFormatter:function(a){return 999<a?(a/1E3).toFixed(1)+"k":a},saveToFile:function(){if(""===this.result)toastr.error("There is no data to save!");else{var a=new Blob([this.result],{type:"text/plain;charset=utf-8"});saveAs(a,"reddit.txt")}},example:function(){this.url="https://www.reddit.com/r/AskReddit/comments/6v9uy8/whats_a_deeply_unsettling_fact/"}},
mounted:function(){toastr.options={newestOnTop:!0,progressBar:!0,positionClass:"toast-bottom-left",preventDuplicates:!0};var a=new Clipboard(".btn-copy");a.on("success",function(a){toastr.success("Copied to clipboard!");a.clearSelection()});a.on("error",function(a){console.error("Action:",a.action);console.error("Trigger:",a.trigger)})}})})();
